<% title = `Brand ${brandId}`; %>
<h2 class="text-2xl font-bold my-6 text-green-400">Brand <%= brandId %></h2>
<table class="min-w-full bg-white border border-gray-200 mb-8">
  <thead>
    <tr class="bg-green-100">
      <th class="py-2 px-4 text-left">ID</th>
      <th class="py-2 px-4 text-left">Name</th>
      <th class="py-2 px-4 text-left">Quantity</th>
    </tr>
  </thead>
  <tbody>
    <% products.map((product) => { %>
    <tr class="hover:bg-gray-100 transition duration-200">
      <td class="py-2 px-4 border-b border-gray-200">
        <%= product.product_id %>
      </td>
      <td class="py-2 px-4 border-b border-gray-200">
        <a
          href="/product/<%= product.product_id %>"
          class="text-green-500 hover:text-green-700 transition duration-200"
          ><%= product.name %></a
        >
      </td>
      <td class="py-2 px-4 border-b border-gray-200">
        <%= product.quantity_in_stock %>
      </td>
    </tr>
    <% }) %>
  </tbody>
</table>
<div class="mt-6 space-x-4">
  <a
    href="/brand/<%= brandId %>/update"
    class="bg-green-500 text-white py-2 px-4 rounded hover:bg-green-600 transition duration-200"
    >Update Brand</a
  >
  <a
    href="#"
    class="delete-brand bg-red-500 text-white py-2 px-4 rounded hover:bg-red-600 transition duration-200"
    >Delete Brand</a
  >
</div>

<script>
  document.querySelectorAll(".delete-brand").forEach((link) => {
    link.addEventListener("click", function (event) {
      event.preventDefault();
      if (confirm("Are you sure you want to delete this brand?")) {
        fetch("/brand/<%= brandId %>/delete", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
        })
          .then((response) => {
            if (response.ok) {
              window.location.href = "/";
            } else {
              alert("Error deleting brand");
            }
          })
          .catch((error) => console.error("Error:", error));
      }
    });
  });
</script>
